- type: Database
  id: DB-CreateUser
  description: 在数据库中创建一个新的用户记录。
  dependencies:
    - none
  acceptanceCriteria:
    - 成功执行后，users表中会增加一条新记录。
    - 如果手机号或邮箱已存在，操作应失败并抛出唯一性约束错误。
  changeLog:
    - date: "2025-10-19"
      description: "初始创建。"

- type: Database
  id: DB-FindUserByPhone
  description: 根据手机号查询用户信息。
  dependencies:
    - none
  acceptanceCriteria:
    - 如果找到用户，返回用户信息。
    - 如果未找到用户，返回null。
  changeLog:
    - date: "2025-10-19"
      description: "初始创建。"

- type: Database
  id: DB-FindUserByEmail
  description: 根据邮箱查询用户信息。
  dependencies:
    - none
  acceptanceCriteria:
    - 如果找到用户，返回用户信息。
    - 如果未找到用户，返回null。
  changeLog:
    - date: "2025-10-19"
      description: "初始创建。"

- type: Database
  id: DB-UpdateUserPassword
  description: 更新用户的密码。
  dependencies:
    - DB-FindUserById
  acceptanceCriteria:
    - 成功更新用户密码。
  changeLog:
    - date: "2025-10-19"
      description: "初始创建。"

- type: Database
  id: DB-SaveVerificationCode
  description: 保存手机或邮箱验证码。
  dependencies:
    - none
  acceptanceCriteria:
    - 验证码成功保存到数据库或缓存中，并设置有效期。
  changeLog:
    - date: "2025-10-19"
      description: "初始创建。"

- type: Database
  id: DB-FindVerificationCode
  description: 查询验证码是否有效。
  dependencies:
    - none
  acceptanceCriteria:
    - 如果验证码存在且在有效期内，返回true。
    - 否则返回false。
  changeLog:
    - date: "2025-10-19"
      description: "初始创建。"

- type: Database
  id: DB-CreatePassenger
  description: 为用户添加一个新的常用乘客。
  dependencies:
    - DB-FindUserById
  acceptanceCriteria:
    - 成功在passengers表中为指定用户ID增加一条新记录。
  changeLog:
    - date: "2025-10-19"
      description: "初始创建。"

- type: Database
  id: DB-FindPassengersByUserId
  description: 查询指定用户的所有常用乘客。
  dependencies:
    - DB-FindUserById
  acceptanceCriteria:
    - 返回指定用户ID的所有乘客列表。
  changeLog:
    - date: "2025-10-19"
      description: "初始创建。"

- type: Database
  id: DB-UpdatePassenger
  description: 更新常用乘客的信息。
  dependencies:
    - none
  acceptanceCriteria:
    - 成功更新passengers表中的乘客记录。
  changeLog:
    - date: "2025-10-19"
      description: "初始创建。"

- type: Database
  id: DB-DeletePassenger
  description: 删除一个常用乘客。
  dependencies:
    - none
  acceptanceCriteria:
    - 成功从passengers表中删除指定的乘客记录。
  changeLog:
    - date: "2025-10-19"
      description: "初始创建。"

- type: Database
  id: DB-FindTrains
  description: 根据出发地、目的地、日期等条件查询车次信息。
  dependencies:
    - none
  acceptanceCriteria:
    - 返回所有符合条件的车次列表。
  changeLog:
    - date: "2025-10-19"
      description: "初始创建。"

- type: Database
  id: DB-CreateOrder
  description: 创建一个新的订单。
  dependencies:
    - DB-FindUserById
  acceptanceCriteria:
    - 在orders表中插入一条新订单记录。
    - 在order_tickets表中插入与订单相关的票据信息。
    - 相应车次的余票数量减少。
  changeLog:
    - date: "2025-10-19"
      description: "初始创建。"

- type: Database
  id: DB-FindOrdersByUserId
  description: 查询指定用户的所有订单。
  dependencies:
    - DB-FindUserById
  acceptanceCriteria:
    - 返回指定用户ID的所有订单列表（包括未出行和历史订单）。
  changeLog:
    - date: "2025-10-19"
      description: "初始创建。"